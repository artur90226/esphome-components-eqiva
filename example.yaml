esphome:
  name: esphome-eqiva-lock
  friendly_name: ESPHome Eqiva Lock

esp32:
  board: esp32dev
  framework:
    type: esp-idf

# Enable logging
logger:
  
# Enable Home Assistant API
api:
  encryption:
    key: "yourkey"
  services:
  - service: pair
    variables:
      card_key: string
    then:
      - eqiva_key_ble.pair:
          card_key: !lambda 'return card_key;'
  - service: lock
    then:
      - eqiva_key_ble.lock:
  - service: unlock
    then:
      - eqiva_key_ble.unlock:
  - service: open
    then:
      - eqiva_key_ble.open:
  - service: status
    then:
      - eqiva_key_ble.status:
ota:


wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Esphome-Web-Eqiva-Lock"
    password: "LMLtYr4bSiPg"

captive_portal:
    
external_components:
  - source: custom-components

esp32_ble_tracker:
  
  scan_parameters:
    window: 300ms
eqiva_ble:

eqiva_key_ble:
  mac_address: 00:1A:22:18:42:88
  id: key_ble
  user_id: 0
  user_key: 12345678636F6763386A726E33746F35

 
 